(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[347],{39097:(e,t,r)=>{"use strict";r.d(t,{default:()=>G});var n=r(95155),a=r(12115),l=r(30832),i=r.n(l),o=r(76920),s=r.n(o),d=r(8963),u=r.n(d);let c=[{id:1,userId:1,start:i()().startOf("week").add(1,"day").hour(9),end:i()().startOf("week").add(1,"day").hour(10).minute(30),title:"Team Meeting",color:"lightblue",note:"nice note for you"},{id:2,userId:2,start:i()().startOf("week").add(3,"day").hour(11),end:i()().startOf("week").add(3,"day").hour(16),title:"Design Review",color:"lightgreen",note:"second note if is ok!"},{id:3,userId:1,start:i()().startOf("week").add(3,"day").hour(11),end:i()().startOf("week").add(3,"day").hour(13),title:"Project Test3",color:"#E6AF2E",note:"do nothing !"},{id:4,userId:1,start:i()().startOf("week").add(2,"day").hour(11),end:i()().startOf("week").add(2,"day").hour(14),title:"Project Kickoff",color:"#2274A5"},{id:5,userId:1,start:i()().startOf("week").add(3,"day").hour(15),end:i()().startOf("week").add(3,"day").hour(17),title:"Project Test 1",color:"#FFB238"},{id:6,userId:1,start:i()().startOf("week").add(3,"day").hour(13),end:i()().startOf("week").add(3,"day").hour(15),title:"Test 2",color:"#48A9A6"}],m=[{id:1,name:"Manuel Gaisberger",image:"https://media.istockphoto.com/id/656669482/photo/smiling-in-blue.jpg?s=612x612&w=0&k=20&c=uuyAsoPlN72gD76kcU_feMlKVCG8cdeqqY85gLqYD5k="},{id:2,name:"Gerog Diwold",image:"https://images.unsplash.com/photo-1633332755192-727a05c4013d?fm=jpg&q=60&w=3000&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8dXNlcnxlbnwwfHwwfHx8MA%3D%3D"}];var h=r(80039),f=r.n(h);r(65847);var p=r(26903),x=r(29911);function v(e){let{setWeekStartDate:t,weekStartDate:r}=e;return(0,n.jsxs)("div",{className:f().header,children:[(0,n.jsxs)("div",{className:f().headerLeft,children:[(0,n.jsx)(p.Button,{variant:"filled",onClick:()=>{t(e=>e.subtract(1,"week"))},rightSection:(0,n.jsx)(x._Jj,{})}),(0,n.jsx)(p.Button,{variant:"filled",onClick:()=>{t(e=>e.add(1,"week"))},rightSection:(0,n.jsx)(x.X6T,{})})]}),(0,n.jsxs)("div",{className:f().headerTitle,children:["Kalendar Woche ",r.isoWeek()]}),(0,n.jsxs)("div",{className:f().headerRight,children:[(0,n.jsx)(p.Button,{variant:"default",children:" Today "}),(0,n.jsx)(p.Button,{variant:"filled",children:"Month"}),(0,n.jsx)(p.Button,{variant:"filled",children:"Week"}),(0,n.jsx)(p.Button,{variant:"filled",children:"Day"})]})]})}var j=r(93588),w=r(27361);function g(e){let{postionedEvents:t,day:r,SLOT_HEIGHT:a,handleMouseDown:l,handleResizeMouseDown:i,users:o,activeEventId:s,handleShowEventDetails:d}=e;return(0,n.jsx)("div",{children:t.map(e=>{let t=r.startOf("day").add(6,"hour"),o=r.startOf("day").add(18,"hour"),u=e.start.isBefore(t)?t:e.start,c=e.end.isAfter(o)?o:e.end;if(c.isBefore(t)||u.isAfter(o))return null;let m=u.diff(t,"minute")/30*a,h=c.diff(u,"minute")/30*a,p=100/e.totalColumns,x=e.column*p,v="".concat(u.format("HH:mm")," - ").concat(c.format("HH:mm"));return(0,n.jsxs)("div",{"data-event":e.title,onMouseDown:t=>l(t,e),onClick:t=>d(t,e.id),className:"".concat(e.id===s?"".concat(f().activeEvent," ").concat(f().events):f().events),style:{top:m,left:"".concat(x,"%"),width:"".concat(p,"%"),height:h,backgroundColor:e.color},children:[e.note&&(0,n.jsx)(w.Tooltip,{color:"pink",arrowOffset:10,transitionProps:{transition:"fade-left",duration:300},arrowSize:4,withArrow:!0,position:"right",label:e.note,children:(0,n.jsx)("div",{className:f().eventNote,children:(0,n.jsx)(j.KGz,{})})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("strong",{children:[e.title," "]}),(0,n.jsx)("div",{style:{fontSize:10,opacity:.8},children:v})]}),c.isSame(e.end)&&(0,n.jsx)("div",{onMouseDown:t=>i(t,e),style:{height:5,background:"#3182ce",cursor:"ns-resize",borderRadius:"0 0 4px 4px",marginTop:0,position:"absolute",bottom:0,left:0,width:"100%"}})]},"".concat(e.id,"-").concat(r.format("YYYYMMDD")))})})}let _=Array.from({length:24},(e,t)=>i()().startOf("day").hour(6).add(30*t,"minute"));var b=r(12881),k=r.n(b);function y(e){let{daysOfWeek:t,events:r,user:a,cellRefs:l,userIndex:o,handleMouseDown:s,handleResizeMouseDown:d,handleAddSimpleEvent:u,handleAddDetailsEvent:c,activeEventId:h,handleShowEventDetails:p}=e;function x(e,t){return e.start.isBefore(t.end)&&t.start.isBefore(e.end)}return t.map((e,t)=>{let v=r.filter(t=>t.userId===a.id&&t.start.isBefore(e.endOf("day"))&&t.end.isAfter(e.startOf("day"))),j=[];return v.forEach(e=>{let t=v.filter(t=>x(t,e)),r=new Set;j.forEach(t=>{x(t,e)&&r.add(t.column)});let n=0;for(;r.has(n);)n++;let a=t.length;j.push({...e,column:n,totalColumns:a})}),(0,n.jsxs)("td",{ref:e=>{l.current[o]||(l.current[o]=[]),l.current[o][t]=e},style:{position:"relative",border:"1px solid #ddd",height:25*_.length},"data-day_table":e.toISOString(),children:[_.map((t,r)=>(0,n.jsx)("div",{style:{height:25,backgroundColor:0===e.day()||6===e.day()?e.isSame(i()())?"":"#f7f9fa":e.isSame(i()())?"#d6f1ff":"",position:"relative"},className:f().hours,onPointerDown:r=>u(r,e,t,a.id),onDoubleClick:r=>c(r,e,t,a.id),"data-user":a.id},r)),(0,n.jsx)(g,{postionedEvents:j,day:e,SLOT_HEIGHT:25,handleMouseDown:s,handleResizeMouseDown:d,users:m,activeEventId:h,handleShowEventDetails:p})]},t)})}i().extend(k());var C=r(39926);function S(e){let{user:t}=e;return(0,n.jsxs)("div",{className:f().sidebarUser,children:[(0,n.jsx)(C.Avatar,{radius:"xl"}),(0,n.jsx)("p",{children:t.name})]})}function N(){let e=i()();return _.map((t,r)=>(0,n.jsxs)("div",{className:f().sidebarTimeSlots,style:{height:25},children:[(0,n.jsx)("p",{style:{fontSize:11},children:0===t.minute()?t.format("HH:mm"):""}),e.format("HH:mm")===t.format("HH:mm")?(0,n.jsx)("div",{style:{width:"100%",height:2,position:"absolute",background:"red",left:0,top:0}}):""]},r))}var D=r(11681),E=r(8593),I=r(70112),M=r(11659);function Y(e){let{users:t,user:r,start:l,end:o,handleOpenDetailsForm:s}=e,[d,u]=(0,a.useState)({projectleiter:t[0].id,mitarbeiter:t[0].id,projectName:"",color:"#00aaff",start:i()(),end:i()().add(1,"hour")}),c=(0,M.m)({mode:"uncontrolled",initialValues:{email:"",termsOfService:!1},validate:{email:e=>/^\S+@\S+$/.test(e)?null:"Invalid email"}}),m=l.format("MMMM DD, YYYY (HH:mm A")+"-"+o.format("HH:mm A");return(0,n.jsxs)("form",{onSubmit:c.onSubmit(e=>console.log(e)),children:[(0,n.jsx)(E.TextInput,{withAsterisk:!0,label:"Project",placeholder:"Project Name",...c.getInputProps("input")},c.key("input")),(0,n.jsx)("small",{children:m}),(0,n.jsxs)(I.Group,{justify:"space-between",mt:"md",children:[(0,n.jsx)(p.Button,{variant:"default",onClick:s,children:"More Details"}),(0,n.jsx)(p.Button,{type:"submit",children:"Submit"})]})]})}var P=r(51013);let R=(0,a.forwardRef)((e,t)=>{let{popoverOpened:r,popoverContent:a,clientX:l,clientY:i,handleCloseSimpleForm:o}=e;return r?(0,n.jsxs)("div",{ref:t,className:"popover fade-in",style:{position:"absolute",left:l,top:i,zIndex:1e3,backgroundColor:"white",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",padding:16,borderRadius:8,minWidth:300,maxWidth:400,maxHeight:500,overflowY:"auto",transition:"opacity 0.2s ease"},children:[(0,n.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:8},children:(0,n.jsx)(P.$8F,{onClick:o,style:{cursor:"pointer",fontSize:"1.2rem",color:"#555"}})}),(0,n.jsx)("div",{style:{width:"100%"},children:a})]}):null});var H=r(63617);function T(e){let{modalContent:t,closeModal:r,isModalOpen:a,title:l}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(H.Modal,{opened:a,onClose:r,title:l,centered:!0,size:"lg",children:t})})}var O=r(15763),B=r(95387),A=r(91481),z=r(31671);function W(e){var t,r,a,l;let{users:i,start:o,end:s}=e,d=(0,M.m)({mode:"uncontrolled",initialValues:{projectName:"",projectleiter:(null==(r=i[0])||null==(t=r.id)?void 0:t.toString())||"",elektriker:(null==(l=i[0])||null==(a=l.id)?void 0:a.toString())||"",projectColor:"#00aaff",elektrikerColor:"#ffaa00",startDate:o,endDate:s,location:"",description:"",comments:""}}),u=i.map(e=>({value:e.id.toString(),label:e.name}));return(0,n.jsxs)("form",{onSubmit:d.onSubmit(e=>console.log(e)),children:[(0,n.jsx)(E.TextInput,{withAsterisk:!0,label:"Project Name",placeholder:"Enter project name",...d.getInputProps("projectName")},d.key("projectName")),(0,n.jsx)(O.Select,{label:"Projektleiter",data:u,...d.getInputProps("projectleiter")}),(0,n.jsx)(B.ColorInput,{label:"Projekt Farbe",format:"hex",...d.getInputProps("projectColor")}),(0,n.jsx)(O.Select,{label:"Elektriker",data:u,...d.getInputProps("elektriker")}),(0,n.jsx)(B.ColorInput,{label:"Elektriker Farbe",format:"hex",...d.getInputProps("elektrikerColor")}),(0,n.jsxs)(I.Group,{grow:!0,children:[(0,n.jsx)(z.K,{label:"Start Datum",valueFormat:"DD-MM-YYYY, HH:mm",...d.getInputProps("startDate"),timePickerProps:{withDropdown:!0,popoverProps:{withinPortal:!1},format:"24h",minutesStep:30}}),(0,n.jsx)(z.K,{label:"End Datum",valueFormat:"DD-MM-YYYY,  HH:mm",...d.getInputProps("endDate"),timePickerProps:{withDropdown:!0,popoverProps:{withinPortal:!1},format:"24h",minutesStep:30}})]}),(0,n.jsx)(E.TextInput,{label:"Ort",placeholder:"Projektstandort",...d.getInputProps("location")}),(0,n.jsx)(A.Textarea,{label:"Beschreibung",autosize:!0,minRows:2,...d.getInputProps("description")}),(0,n.jsx)(A.Textarea,{label:"Kommentare",autosize:!0,minRows:2,...d.getInputProps("comments")}),(0,n.jsx)(I.Group,{justify:"space-between",mt:"md",children:(0,n.jsx)(p.Button,{type:"submit",children:"Speichern"})})]})}function L(e){let{daysOfWeek:t}=e;return(0,n.jsxs)("tr",{className:f().tableHeaderTitle,children:[(0,n.jsx)("th",{style:{width:120},children:"Resurcen"}),(0,n.jsx)("th",{}),t.map((e,t)=>(0,n.jsxs)("th",{children:[(0,n.jsx)("p",{style:{fontSize:15},children:(0,n.jsx)("strong",{children:e.format("dddd")})}),(0,n.jsx)("p",{style:{fontSize:15},children:e.format("DD, MMMM YYYY")})]},t))]})}function F(e){var t;let{eventId:r}=e,a=c.find(e=>e.id===r),l=e=>{},o=e=>{};return a?(0,n.jsxs)("div",{className:f().wrapper,children:[(0,n.jsxs)("div",{className:f().header,style:{background:"".concat(a.color,"/",10)},children:[(0,n.jsx)("div",{className:f().color,style:{backgroundColor:a.color,border:"1px solid ".concat(a.color)}}),(0,n.jsx)("h2",{className:f().title,children:a.title})]}),(0,n.jsxs)("div",{className:f().detailRow,children:[(0,n.jsx)("span",{className:f().label,children:"Datum:"}),(0,n.jsx)("span",{className:f().value,children:i()(a.start).format("dddd, MMM D, YYYY")})]}),(0,n.jsxs)("div",{className:f().detailRow,children:[(0,n.jsx)("span",{className:f().label,children:"Zeit:"}),(0,n.jsxs)("span",{className:f().value,children:[i()(a.start).format("HH:mm")," - ",i()(a.end).format("HH:mm")]})]}),(0,n.jsxs)("div",{className:f().detailRow,children:[(0,n.jsx)("span",{className:f().label,children:"Benutzer:"}),(0,n.jsx)("span",{className:f().value,children:null==(t=m.find(e=>e.id===a.userId))?void 0:t.name})]}),a.note&&(0,n.jsxs)("div",{className:f().detailRow,children:[(0,n.jsx)("span",{className:f().label,children:"Note:"}),(0,n.jsx)("span",{className:f().value,children:a.note})]}),(0,n.jsxs)("div",{className:f().buttonRow,children:[(0,n.jsx)("button",{className:f().editButton,onClick:()=>null==o?void 0:o(a.id),children:"Edit"}),(0,n.jsx)("button",{className:f().deleteButton,onClick:()=>null==l?void 0:l(a.id),children:"Delete"})]})]}):(0,n.jsx)("div",{className:f().wrapper,children:"Event not found."})}function G(){let e=(0,D.useDisclosure)(!1),t=e[0],r=e[1].open,l=e[1].close,[o,s]=(0,a.useState)(i()().startOf("week")),[d,u]=(0,a.useState)(c),[h,p]=(0,a.useState)(null),[x,j]=(0,a.useState)(null),w=(0,a.useRef)(null),g=(0,a.useRef)([]),_=(0,a.useRef)([]),b=Array.from({length:7},(e,t)=>o.add(t,"day")),[k,C]=(0,a.useState)(null),E=(e,r)=>{e.stopPropagation();let n=e.currentTarget.getBoundingClientRect(),a=e.clientY-n.top;e.currentTarget.classList.add(f().activeEvent),C(r.id),p({eventId:r.id,offsetY:a,originalStart:r.start,duration:r.end.diff(r.start,"minute")}),t&&l()},I=(e,r)=>{e.stopPropagation();let n=e.currentTarget.parentElement.getBoundingClientRect(),a=e.clientY-n.top;t&&l(),j({eventId:r.id,start:r.start,originalEnd:r.end,offsetY:a})},M=e=>{if(!w.current)return;let t=()=>{for(let t=0;t<_.current.length;t++){let r=_.current[t];if(!r)continue;let n=r.getBoundingClientRect();if(e.clientY>=n.top&&e.clientY<=n.bottom)return m[t].id}return null},r=t=>{let r=g.current[t];if(!r)return -1;for(let t=0;t<r.length;t++){let n=r[t];if(!n)continue;let a=n.getBoundingClientRect();if(e.clientX>=a.left&&e.clientX<=a.right)return t}return -1};if(h){let n=t();if(null===n)return;let a=m.findIndex(e=>e.id===n);if(-1===a)return;let l=r(a);if(-1===l)return;let i=g.current[a][l];if(!i)return;let o=i.getBoundingClientRect(),s=Math.max(0,Math.floor((e.clientY-o.top-h.offsetY)/25)),d=b[l].startOf("day").add(6,"hour").add(30*s,"minute"),c=d.add(h.duration,"minute");u(e=>e.map(e=>e.id===h.eventId?{...e,start:d,end:c,userId:n}:e))}else if(x){let n=t();if(null===n)return;let a=m.findIndex(e=>e.id===n);if(-1===a)return;let l=r(a);if(-1===l)return;let i=g.current[a][l];if(!i)return;let o=i.getBoundingClientRect(),s=e.clientY-o.top+15,d=Math.max(1,Math.floor((s=Math.max(s,25))/25)),c=b[l].startOf("day").add(6,"hour").add(30*d,"minute"),h=x.start.add(30,"minute"),f=c.isAfter(h)?c:h;u(e=>e.map(e=>e.id===x.eventId?{...e,end:f,userId:n}:e))}},P=()=>{p(null),j(null),C(null)};(0,a.useEffect)(()=>(h||x?(window.addEventListener("mousemove",M),window.addEventListener("mouseup",P)):(window.removeEventListener("mousemove",M),window.removeEventListener("mouseup",P)),()=>{window.removeEventListener("mousemove",M),window.removeEventListener("mouseup",P)}),[h,x]);let[H,O]=(0,a.useState)(0),[B,A]=(0,a.useState)(0),[z,G]=(0,a.useState)(i()()),[X,K]=(0,a.useState)(i()()),[U,q]=(0,a.useState)(),Z=(0,a.useRef)(null),V=e=>{var t,n;e.stopPropagation();let a=e.currentTarget,l=a.getBoundingClientRect(),i=(null==(t=Z.current)?void 0:t.offsetWidth)||300,o=(null==(n=Z.current)?void 0:n.offsetHeight)||180,s=window.innerWidth,d=window.innerHeight,u=l.top+window.scrollY,c=l.left+window.scrollX,m=c+a.clientWidth+10,h=u;m+i>window.scrollX+s&&(m=c-i-10),h+o>window.scrollY+d&&(h=u+a.offsetHeight-o),O(m),A(h),r()},J=(e,t,a,l)=>{e.stopPropagation(),V(e);let i=m.find(e=>e.id===l),o=t.hour(a.hour()).minute(a.minute()),s=o.add(30,"minute");G(o),K(s),q(i),ee((0,n.jsx)(Y,{start:z,end:X,user:U,users:m,handleOpenDetailsForm:ei})),r()},Q=(0,a.useRef)(null);(0,a.useEffect)(()=>{function e(e){let t=Z.current,r=Q.current;if(!t||!r)return;let n=Array.from(r.querySelectorAll("[data-day_table]")).some(t=>t.contains(e.target));t.contains(e.target)||n||l()}return t&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[t,l]);let[$,ee]=(0,a.useState)(null),et=(0,D.useDisclosure)(!1),er=et[0],en=et[1].open,ea=et[1].close,el=(e,r,n,a)=>{e.preventDefault();let i=m.find(e=>e.id===a),o=r.hour(n.hour()).minute(n.minute()),s=o.add(30,"minute");G(o),K(s),q(i),t&&l(),en()},ei=()=>{t&&l(),en()},eo=(e,t)=>{V(e),ee((0,n.jsx)(F,{eventId:t}))};return(0,n.jsxs)("div",{ref:w,children:[(0,n.jsx)(v,{setWeekStartDate:s,weekStartDate:o}),(0,n.jsx)(R,{ref:Z,popoverOpened:t,handleCloseSimpleForm:()=>{l()},popoverContent:$,clientX:H,clientY:B}),(0,n.jsx)(T,{isModalOpen:er,title:"Add Details Event",closeModal:ea,modalContent:(0,n.jsx)(W,{start:z,end:X,user:U,users:m})}),(0,n.jsx)("div",{style:{overflowX:"auto"},children:(0,n.jsxs)("table",{style:{borderCollapse:"collapse",width:"100%"},children:[(0,n.jsx)("thead",{className:f().calendarWeekHeader,children:(0,n.jsx)(L,{daysOfWeek:b})}),(0,n.jsx)("tbody",{ref:Q,children:m.map((e,t)=>(0,n.jsxs)("tr",{ref:e=>_.current[t]=e,children:[(0,n.jsx)("td",{className:f().userTableRow,children:(0,n.jsx)(S,{user:e})}),(0,n.jsx)("td",{style:{width:30},children:(0,n.jsx)(N,{})}),(0,n.jsx)(y,{daysOfWeek:b,events:d,user:e,cellRefs:g,userIndex:t,handleMouseDown:E,handleResizeMouseDown:I,handleAddSimpleEvent:J,handleAddDetailsEvent:el,activeEventId:k,handleShowEventDetails:eo})]},e.id))})]})})]})}i().locale("de"),i().extend(s()),i().extend(u())},69384:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,80039,23)),Promise.resolve().then(r.bind(r,39097))},80039:e=>{e.exports={container:"Calendar_container__8veuQ",tableHeaderTitle:"Calendar_tableHeaderTitle__LIU_A",week:"Calendar_week___llvR",weekTitle:"Calendar_weekTitle__zG3nW",userSidebar:"Calendar_userSidebar__57c2E",day:"Calendar_day__wzMNE",calendarWeekHeader:"Calendar_calendarWeekHeader__mkEjO",sidebarTimeSlots:"Calendar_sidebarTimeSlots__EGlGZ",userTableRow:"Calendar_userTableRow__MWnPe",sidebarUser:"Calendar_sidebarUser__OCPx9",hours:"Calendar_hours__sy8f_",header:"Calendar_header__UNNA4",headerRight:"Calendar_headerRight__igm8e",headerLeft:"Calendar_headerLeft__cxaDy",headerTitle:"Calendar_headerTitle__Gl4T1",events:"Calendar_events__p1KFU",eventNote:"Calendar_eventNote__2fuf0",activeEvent:"Calendar_activeEvent__QzS3y",wrapper:"Calendar_wrapper__bZ26z",color:"Calendar_color__RjIdp",title:"Calendar_title__A4L7E",detailRow:"Calendar_detailRow__VSb4Y",label:"Calendar_label__YB3yT",value:"Calendar_value__tv87F",buttonRow:"Calendar_buttonRow__9J3fe",editButton:"Calendar_editButton__Tlo_I",deleteButton:"Calendar_deleteButton__YkZX_"}}},e=>{e.O(0,[952,545,512,672,711,920,903,385,188,558,31,372,190,441,964,358],()=>e(e.s=69384)),_N_E=e.O()}]);